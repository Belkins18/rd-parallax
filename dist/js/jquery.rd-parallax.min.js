(function(){(function(d,q,m){var n,p,l;l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);/iPhone|iPad|iPod/i.test(navigator.userAgent)&&navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);p=-1!==navigator.appVersion.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/");n=function(){function c(a,e){this.options=d.extend(!0,{},this.Defaults,e);this.$element=d(a);this.$canvas=!1;this.$win=d(m);this.$doc=d(q);this.$anchor=!1;this.initialize()}c.prototype.Defaults=
{blur:!0,direction:"normal",speed:1,screenAliases:{0:"",480:"xs",768:"sm",992:"md",1200:"lg"}};c.prototype.initialize=function(){var a;a=this;a.$element.parents().each(function(){var e,b,f;f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(b in f)f.hasOwnProperty(b)&&null!=this.style[b]&&(e=m.getComputedStyle(this).getPropertyValue(f[b]));if(null!=e&&0<e.length&&"none"!==e)return a.$anchor=d(this),!1}).end().wrapInner(d("<div/>",
{"class":"rd-parallax-inner"})).find(".rd-parallax-layer[data-type]").each(function(){var e,b;e=d(this);switch(e.attr("data-type").toLowerCase()){case "media":if(b=this.getAttribute("data-url"))e.css({"background-image":a.url(b)}),("true"===this.getAttribute("data-blur")||a.options.blur)&&d("<img/>",{src:b}).load(function(){e.attr("data-media-width",this.width);e.attr("data-media-height",this.height);if(!l)a.$win.on("resize",d.proxy(a.blurMedia,e[0],a));return d.proxy(a.blurMedia,e[0],a)()});a.$element.on("resize",
d.proxy(a.resizeMedia,this,a));a.$element.on("resize",d.proxy(a.moveLayer,this,a));if(l)a.$win.on("orientationchange",d.proxy(a.resizeMedia,this,a));else a.$win.on("resize",d.proxy(a.resizeMedia,this,a))}if(l)a.$win.on("resize orientationchange",d.proxy(a.moveLayer,this,a));else a.$doc.on("scroll",d.proxy(a.moveLayer,this,a)),a.$win.on("resize",d.proxy(a.moveLayer,this,a)),"true"===this.getAttribute("data-fade")&&(a.$doc.on("scroll",d.proxy(a.fadeLayer,this,a)),a.$win.on("resize",d.proxy(a.fadeLayer,
this,a)))});a.$canvas=a.$element.find(".rd-parallax-inner");if("true"===a.$element.attr("data-fit-to-parent"))a.$win.on("resize",d.proxy(a.fitCanvas,a.$canvas,a));l||(a.$win.on("resize",d.proxy(a.resizeWrap,a.$element[0],a)),a.$win.on("resize",d.proxy(a.resizeCanvas,a.$canvas[0],a)),a.$doc.on("scroll",d.proxy(a.moveCanvas,a.$canvas[0],a)),a.$win.on("resize",d.proxy(a.moveCanvas,a.$canvas[0],a)));a.$win.trigger("resize");a.$win.trigger("orientationchange");a.$doc.trigger("scroll");a.$win.load(function(){a.$win.trigger("resize");
a.$win.trigger("orientationchange");return a.$doc.trigger("scroll")})};c.prototype.moveLayer=function(a){var e,b,f,g,c,h,k;c=a.$win.scrollTop();g=a.$element.offset().top;k=a.$win.height();e=a.$element.height();b=a.$doc.height();f=this.offsetHeight;parseFloat(h);h=("inverse"===a.getAttribute(this,"direction")?-1:1)*Math.min(parseFloat(a.getAttribute(this,"speed")),2);"media"!==this.getAttribute("data-type")?g<k||g>b-k?(b=g<k?g/(k-e):(g-b+k)/(k-e),isFinite(b)||(b=0)):b=.5:b=.5;if(l)return f=(e-f)/2,
d(this).css(a.transform(f,a));f=-(g-c)*h+(e-f)/2+(k-e)*b*h;if(c+k>=g&&c<=g+e)return d(this).css(a.transform(f,a))};c.prototype.moveCanvas=function(a,e){var b,f,g;b=d(this);g=a.$win.scrollTop();f=a.$element.offset().top;f=a.$anchor?a.$element.position().top:f-g;return b.css({top:f})};c.prototype.fadeLayer=function(a,e){var b,f,g,c,h;g=d(this);b=a.$element.height();f=a.$element.offset().top+b/2;c=g.offset().top+g.height()/2;h=b/6;if(f+h>c&&f-h<c)return g.css({opacity:1});b=f-h<c?1+(f+h-c)/b/3*10:1-
(f-h-c)/b/3*10;return g.css({opacity:0>b?0:1<b?1:b.toFixed(2)})};c.prototype.blurMedia=function(a){var e,b,f,c;e=this.offsetHeight;c=this.offsetWidth;b=parseFloat(this.getAttribute("data-media-height"));f=parseFloat(this.getAttribute("data-media-width"));e=Math.ceil(Math.max(e/b,c/f));return d(this).css(a.blur(e))};c.prototype.resizeMedia=function(a){return this.style.height=a.px(a.getMediaHeight(a.$win.height(),a.$element.height(),a.getAttribute(this,"speed"),"inverse"===a.getAttribute(this,"direction")?
-1:1))};c.prototype.resizeWrap=function(a){return this.style.height=a.px(a.$canvas.outerHeight())};c.prototype.resizeCanvas=function(a){return d(this).css({position:p&&a.$anchor?"relative":"fixed",left:p?"auto":a.$anchor?a.$element.offset().left-a.$anchor.offset().left:a.$element.offset().left,width:a.$element.width()})};c.prototype.fitCanvas=function(a){return setTimeout(function(){return a.$canvas.css({height:a.$element.parent().parent().height()})})};c.prototype.getMediaHeight=function(a,e,b,f){b=
Math.max(parseFloat(b),0);b=Math.min(parseFloat(b),2);return e+(-1===f?(e+a)*b:0)+(1>=b?Math.abs(a-e)*b:a*b)+56};c.prototype.url=function(a){return"url("+a+")"};c.prototype.px=function(a){return a+"px"};c.prototype.transform=function(a,e){return{"-webkit-transform":"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,"+a+",0,1)",transform:"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,"+a+",0,1)"}};c.prototype.blur=function(a){return 3<a?{"-webkit-filter":"blur("+a+"px)",filter:"blur("+a+"px)"}:{filter:"none",
"-webkit-filter":"none"}};c.prototype.getAttribute=function(a,e){var b,f,c,d,h;if(null!=this.options.screenAliases)for(f=Object.keys(this.options.screenAliases).reverse(),c=d=0,h=f.length-1;(0<=h?d<=h:d>=h)&&!(b=""!==this.options.screenAliases[f[c]]?"-"+this.options.screenAliases[f[c]]:this.options.screenAliases[f[c]],b=a.getAttribute("data"+b+"-"+e),f[c]<=this.$win.width()&&null!=b);c=0<=h?++d:--d);return null!=b?b:this.options[e]};return c}();d.fn.extend({RDParallax:function(c){return this.each(function(){var a;
a=d(this);if(!a.data("RDParallax"))return a.data("RDParallax",new n(this,c))})}});return m.RDParallax=n})(window.jQuery,document,window);"undefined"!==typeof module&&null!==module?module.exports=window.RDParallax:"function"===typeof define&&define.amd&&define(["jquery"],function(){return window.RDParallax})}).call(this);
