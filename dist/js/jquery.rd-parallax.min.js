(function(){(function(d,t,n){var p,q,l;l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);/iPhone|iPad|iPod/i.test(navigator.userAgent)&&navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);q=-1!==navigator.appVersion.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/");p=function(){function c(a,f){this.options=d.extend(!0,{},this.Defaults,f);this.$element=d(a);this.$canvas=!1;this.$win=d(n);this.$doc=d(t);this.$anchor=!1;this.initialize()}c.prototype.Defaults=
{blur:!0,direction:"normal",speed:1,offset:0,screenAliases:{0:"",480:"xs",768:"sm",992:"md",1200:"lg",1920:"xl",2560:"xxl"}};c.prototype.initialize=function(){var a;a=this;a.$element.parents().each(function(){var f,b,e;e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(b in e)e.hasOwnProperty(b)&&null!=this.style[b]&&(f=n.getComputedStyle(this).getPropertyValue(e[b]));if(null!=f&&0<f.length&&"none"!==
f)return a.$anchor=d(this),!1}).end().wrapInner(d("<div/>",{"class":"rd-parallax-inner"})).find(".rd-parallax-layer[data-type]").each(function(){var f,b;f=d(this);switch(f.attr("data-type").toLowerCase()){case "media":if(b=this.getAttribute("data-url"))f.css({"background-image":a.url(b)}),("true"===this.getAttribute("data-blur")||a.options.blur)&&d("<img/>",{src:b}).load(function(){f.attr("data-media-width",this.width);f.attr("data-media-height",this.height);if(!l)a.$win.on("resize",d.proxy(a.blurMedia,
f[0],a));return d.proxy(a.blurMedia,f[0],a)()});a.$element.on("resize",d.proxy(a.resizeMedia,this,a));a.$element.on("resize",d.proxy(a.moveLayer,this,a));if(l)a.$win.on("orientationchange",d.proxy(a.resizeMedia,this,a));else a.$win.on("resize",d.proxy(a.resizeMedia,this,a))}if(l)a.$win.on("resize orientationchange",d.proxy(a.moveLayer,this,a));else a.$doc.on("scroll",d.proxy(a.moveLayer,this,a)),a.$win.on("resize",d.proxy(a.moveLayer,this,a)),"true"===this.getAttribute("data-fade")&&(a.$doc.on("scroll",
d.proxy(a.fadeLayer,this,a)),a.$win.on("resize",d.proxy(a.fadeLayer,this,a)))});a.$canvas=a.$element.find(".rd-parallax-inner");if("true"===a.$element.attr("data-fit-to-parent"))a.$win.on("resize",d.proxy(a.fitCanvas,a.$canvas,a));l||(a.$win.on("resize",d.proxy(a.resizeWrap,a.$element[0],a)),a.$win.on("resize",d.proxy(a.resizeCanvas,a.$canvas[0],a)),a.$doc.on("scroll",d.proxy(a.moveCanvas,a.$canvas[0],a)),a.$win.on("resize",d.proxy(a.moveCanvas,a.$canvas[0],a)));a.$win.trigger("resize");a.$win.trigger("orientationchange");
a.$doc.trigger("scroll");a.$win.load(function(){a.$win.trigger("resize");a.$win.trigger("orientationchange");return a.$doc.trigger("scroll")})};c.prototype.moveLayer=function(a){var f,b,e,r,g,c,m,k;c=a.$win.scrollTop();g=a.$element.offset().top;k=a.$win.height();b=a.$element.height();e=a.$doc.height();r=this.offsetHeight;parseFloat(m);m=("inverse"===a.getAttribute(this,"direction")?-1:1)*Math.min(parseFloat(a.getAttribute(this,"speed")),2);this.getAttribute("data-agent");null!=(f=this.getAttribute("data-agent"))?
e=(f=d(f)).length?(g+k-(f.offset().top+k))/(k-b):.5:"media"!==this.getAttribute("data-type")?g<k||g>e-k?(e=g<k?g/(k-b):(g+k-e)/(k-b),isFinite(e)||(e=0)):e=.5:e=.5;if(l)return f=(b-r)/2,d(this).css(a.transform(f,a));f=-(g-c)*m+(b-r)/2+(k-b)*e*m+parseInt(a.getAttribute(this,"offset"));if(c+k>=g&&c<=g+b||"true"===this.getAttribute("data-unbound"))return d(this).css(a.transform(f,a))};c.prototype.moveCanvas=function(a,f){var b,e,c;b=d(this);c=a.$win.scrollTop();e=a.$element.offset().top;e=a.$anchor?a.$element.position().top:
e-c;return b.css({top:e})};c.prototype.fadeLayer=function(a,f){var b,e,c,g,h;c=d(this);b=a.$element.height();e=a.$element.offset().top+b/2;g=c.offset().top+c.height()/2;h=b/6;if(e+h>g&&e-h<g)return c.css({opacity:1});b=e-h<g?1+(e+h-g)/b/3*10:1-(e-h-g)/b/3*10;return c.css({opacity:0>b?0:1<b?1:b.toFixed(2)})};c.prototype.blurMedia=function(a){var f,b,e,c;f=this.offsetHeight;c=this.offsetWidth;b=parseFloat(this.getAttribute("data-media-height"));e=parseFloat(this.getAttribute("data-media-width"));f=
Math.ceil(Math.max(f/b,c/e));return d(this).css(a.blur(f))};c.prototype.resizeMedia=function(a){return this.style.height=a.px(a.getMediaHeight(a.$win.height(),a.$element.height(),a.getAttribute(this,"speed"),"inverse"===a.getAttribute(this,"direction")?-1:1))};c.prototype.resizeWrap=function(a){return this.style.height=a.px(a.$canvas.outerHeight())};c.prototype.resizeCanvas=function(a){return d(this).css({position:q&&a.$anchor?"relative":"fixed",left:q?"auto":a.$anchor?a.$element.offset().left-a.$anchor.offset().left:
a.$element.offset().left,width:a.$element.width()})};c.prototype.fitCanvas=function(a){return setTimeout(function(){return a.$canvas.css({height:a.$element.parent().parent().height()})})};c.prototype.getMediaHeight=function(a,f,b,e){b=Math.max(parseFloat(b),0);b=Math.min(parseFloat(b),2);return f+(-1===e?(f+a)*b:0)+(1>=b?Math.abs(a-f)*b:a*b)+56};c.prototype.url=function(a){return"url("+a+")"};c.prototype.px=function(a){return a+"px"};c.prototype.transform=function(a,f){return{"-webkit-transform":"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,"+
a+",0,1)",transform:"matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,0,"+a+",0,1)"}};c.prototype.blur=function(a){return 3<a?{"-webkit-filter":"blur("+a+"px)",filter:"blur("+a+"px)"}:{filter:"none","-webkit-filter":"none"}};c.prototype.getAttribute=function(a,f){var b,e,c,d,h;if(null!=this.options.screenAliases)for(e=Object.keys(this.options.screenAliases).reverse(),c=d=0,h=e.length-1;(0<=h?d<=h:d>=h)&&!(b=""!==this.options.screenAliases[e[c]]?"-"+this.options.screenAliases[e[c]]:this.options.screenAliases[e[c]],
b=a.getAttribute("data"+b+"-"+f),e[c]<=this.$win.width()&&null!=b);c=0<=h?++d:--d);return null!=b?b:this.options[f]};return c}();d.fn.extend({RDParallax:function(c){return this.each(function(){var a;a=d(this);if(!a.data("RDParallax"))return a.data("RDParallax",new p(this,c))})}});return n.RDParallax=p})(window.jQuery,document,window);"undefined"!==typeof module&&null!==module?module.exports=window.RDParallax:"function"===typeof define&&define.amd&&define(["jquery"],function(){return window.RDParallax})}).call(this);
